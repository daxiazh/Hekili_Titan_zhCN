## Rogue: Subtlety PVP - 敏锐盗贼 PVP �?
## 泰坦时空特别�?- PVP 优化手法
## 核心策略: 控制�?> 爆发 > 生存
## Requirements: 5.1, 5.3

## ============================================================================
## 战前准备
## ============================================================================

actions.precombat+=/stealth
actions.precombat+=/premeditation
actions.precombat+=/potion

## ============================================================================
## 默认动作
## ============================================================================

actions+=/call_action_list,name=init
actions+=/best_healing_potion,if=health.pct<35
## PVP 防守优先
actions+=/run_action_list,name=pvp_defensive,if=in_pvp&(enemy_burst_active|health.pct<50)
## PVP 打断优先
actions+=/run_action_list,name=pvp_interrupt,if=in_pvp&target.casting
## PVP 控制优先
actions+=/run_action_list,name=pvp_cc,if=in_pvp&target_is_healer&target_dr_stun<3
## 潜行起手
actions+=/run_action_list,name=stealth,if=buff.stealth.up|buff.shadow_dance.up
## PVP 单目�?
actions+=/run_action_list,name=pvp_st,if=in_pvp
## PVE 回退
actions+=/run_action_list,name=st

## ============================================================================
## 初始化变�?
## ============================================================================

actions.init+=/variable,name=pvp_burst_window,value=!enemy_burst_active&target.health.pct<50&!target_has_defensive
actions.init+=/variable,name=need_snd,value=!buff.slice_and_dice.up|buff.slice_and_dice.remains<3
actions.init+=/variable,name=shadow_dance_ready,value=cooldown.shadow_dance.remains<1

## ============================================================================
## PVP 防守优先�?
## ============================================================================

actions.pvp_defensive+=/cloak_of_shadows,if=health.pct<25&enemy_burst_active
actions.pvp_defensive+=/evasion,if=health.pct<30&!buff.cloak_of_shadows.up
actions.pvp_defensive+=/vanish,if=health.pct<20&!buff.evasion.up&!buff.cloak_of_shadows.up
actions.pvp_defensive+=/preparation,if=cooldown.vanish.remains>0&cooldown.evasion.remains>0&health.pct<30
actions.pvp_defensive+=/healthstone,if=health.pct<25
actions.pvp_defensive+=/health_potion,if=health.pct<30

## ============================================================================
## PVP 打断优先�?
## ============================================================================

actions.pvp_interrupt+=/kick,if=target_is_healer&target.casting
actions.pvp_interrupt+=/kick,if=target_cast_priority>=80
actions.pvp_interrupt+=/kick,if=target.casting

## ============================================================================
## PVP 控制优先�?
## ============================================================================

actions.pvp_cc+=/kidney_shot,if=target_is_healer&target_dr_stun<3&combo_points.current>=4
actions.pvp_cc+=/kidney_shot,if=target.health.pct<30&target_dr_stun<3&combo_points.current>=4
actions.pvp_cc+=/blind,if=!target_is_healer&target_dr_disorient<3
actions.pvp_cc+=/gouge,if=target.casting&target_dr_incapacitate<3&!target_is_healer
actions.pvp_cc+=/sap,if=buff.stealth.up&target_dr_incapacitate<3

## ============================================================================
## 潜行起手
## ============================================================================

actions.stealth+=/premeditation,if=combo_points.current<3
actions.stealth+=/cheap_shot,if=in_pvp&target_dr_stun<3
actions.stealth+=/garrote,if=in_pvp&target_is_healer&target_dr_stun>=3
actions.stealth+=/ambush

## ============================================================================
## PVP 单目标循�?
## ============================================================================

actions.pvp_st+=/potion,use_off_gcd=1,if=variable.pvp_burst_window
actions.pvp_st+=/use_items,use_off_gcd=1
actions.pvp_st+=/kick,use_off_gcd=1
## 切割维护
actions.pvp_st+=/slice_and_dice,if=variable.need_snd&combo_points.current>=1
## 爆发窗口 - 暗影之舞
actions.pvp_st+=/shadow_dance,if=variable.pvp_burst_window&combo_points.current<=2
## 剔骨
actions.pvp_st+=/eviscerate,if=combo_points.current>=5
## 割裂 - 持续伤害
actions.pvp_st+=/rupture,if=combo_points.current>=4&!debuff.rupture.up
## 出血
actions.pvp_st+=/hemorrhage,if=!debuff.hemorrhage.up|debuff.hemorrhage.remains<3
## 背刺攒星
actions.pvp_st+=/backstab

## ============================================================================
## PVE 单目标循�?(回退)
## ============================================================================

actions.st+=/potion,use_off_gcd=1
actions.st+=/use_items,use_off_gcd=1
actions.st+=/kick,use_off_gcd=1
actions.st+=/slice_and_dice,if=!buff.slice_and_dice.up&combo_points.current>=1
actions.st+=/shadow_dance,if=combo_points.current<=2
actions.st+=/eviscerate,if=combo_points.current>=5
actions.st+=/rupture,if=combo_points.current>=4&!debuff.rupture.up
actions.st+=/hemorrhage,if=!debuff.hemorrhage.up|debuff.hemorrhage.remains<3
actions.st+=/backstab
